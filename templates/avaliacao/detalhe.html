{% extends "base.html" %}
{% block title %}Detalhes da Avaliação{% endblock %}
{% block content %}
<div class="content-header">
    <h1>Detalhes da Avaliação</h1>
    <p>Aluno: {{ avaliacao.aluno.user.nome_completo }}</p>
</div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-header">Nota Final (AAt)</div>
            <div class="card-body text-center">
                <h1 class="display-4">{{ avaliacao.nota_final }}</h1>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                Nota Disciplinar (Objetiva)
                <span class="badge bg-secondary rounded-pill fs-6">{{ avaliacao.nota_disciplinar }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                Média FADA (Subjetiva)
                <span class="badge bg-secondary rounded-pill fs-6">{{ avaliacao.nota_fada }}</span>
            </li>
            <li class="list-group-item">
                <strong>Observações:</strong><br>
                {{ avaliacao.observacoes or 'Nenhuma observação.' }}
            </li>
        </ul>
    </div>
</div>

<h5>Detalhamento dos Critérios FADA</h5>
<div class="table-container">
    <table class="table table-sm table-striped">
        <thead><tr><th>Critério</th><th class="text-center" width="100">Nota</th></tr></thead>
        <tbody>
            {% for item in avaliacao.itens %}
            <tr>
                <td>{{ item.criterio }}</td>
                <td class="text-center fw-bold {{ 'text-danger' if item.nota < 7 else 'text-success' }}">
                    {{ item.nota }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="mt-3">
    <a href="{{ url_for('avaliacao.ver_avaliacoes', aluno_id=avaliacao.aluno_id) }}" class="btn btn-secondary">Voltar</a>
</div>
{% endblock %}