{# backend/services/site_config_service.py #}

{# templates/partials/_horario_slot_edit.html #}
{% if aula != 'SKIP' %}
    <td class="schedule-slot"
        rowspan="{{ aula.duracao if not aula.is_disposicao else 1 }}"
        data-dia="{{ dia }}"
        data-periodo="{{ periodo }}">

        {% if aula.is_disposicao %}
            <button type="button" class="slot-button disponivel" data-action="add">Adicionar</button>
        {% else %}
            <div class="slot-content {% if aula.status == 'pendente' %}pendente{% endif %}">
                <div class="slot-info">
                    <div class="disciplina-title">{{ aula.materia }}</div>
                    {% if aula.instrutor %}
                    <div class="instrutor-name">{{ aula.instrutor }}</div>
                    {% endif %}
                    {% if aula.observacao %}
                    <div class="slot-observacao">{{ aula.observacao }}</div>
                    {% endif %}
                </div>

                {% if aula.status == 'pendente' and is_admin %}
                    {# A√á√ïES PARA AULAS PENDENTES: MUDAN√áA DE LAYOUT PARA HORIZONTAL #}
                    <div class="slot-actions horizontal-actions approval">
                        <button class="btn-icon approve" data-action="approve_all" data-id="{{ aula.id }}" data-periodo="{{ aula.periodo }}" data-duracao="{{ aula.duracao }}" title="Aprovar Todos os Per√≠odos">‚úì</button>
                        <button class="btn-icon manage" data-action="manage_approval" data-id="{{ aula.id }}" title="Gerenciar Aprova√ß√£o Parcial">‚úèÔ∏è</button>
                        <button class="btn-icon deny" data-action="deny_aula" data-id="{{ aula.id }}" title="Negar Aula">√ó</button>
                    </div>
                {% elif aula.can_edit and not aula.is_continuation %}
                    {# A√á√ïES PARA AULAS CONFIRMADAS: MUDAN√áA DE LAYOUT PARA HORIZONTAL #}
                    <div class="slot-actions horizontal-actions">
                        <button class="btn-icon" data-action="edit" data-id="{{ aula.id }}" title="Editar Aula">‚úèÔ∏è</button>
                        <button class="btn-icon" data-action="delete" data-id="{{ aula.id }}" title="Remover Aula">üóëÔ∏è</button>
                    </div>
                {% elif not aula.can_edit and not aula.is_continuation %}
                    {# A√á√ïES PARA AULAS S√ì DE VISUALIZA√á√ÉO #}
                    <div class="slot-actions">
                        <span class="no-permission" title="Voc√™ n√£o pode editar esta aula">üîí</span>
                    </div>
                {% endif %}

                {% if aula.status == 'pendente' %}
                    <span class="status-icon" title="Aguardando confirma√ß√£o">üïê</span>
                {% endif %}
            </div>
        {% endif %}
    </td>
{% endif %}