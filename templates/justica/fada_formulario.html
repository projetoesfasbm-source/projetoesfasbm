{% extends "base.html" %}

{% block title %}Preencher FADA - {{ aluno.user.nome_completo }}{% endblock %}

{% block content %}
<div class="content-header">
    <h1>Avaliação FADA</h1>
    <p>Preenchendo a Ficha de Avaliação de Desempenho Atitudinal para:</p>
    <h4>{{ aluno.user.posto_graduacao or '' }} {{ aluno.user.nome_completo }} ({{ aluno.user.matricula or 'N/A' }})</h4>
</div>

<form method="POST"> 
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <div class="card">
        <div class="card-header">
            Atributos Avaliados (Padrão: 8.0)
        </div>
        <div class="card-body">
            <p class="form-text">Conforme o Art. 125, § 3º, o aluno parte da nota 8.0. Aumente ou diminua a nota conforme elogios ou punições (Art. 125, § 4º).</p>
            <div class="row g-3">
                
                {% set atributos = [
                    (1, 'Expressão oral e escrita'), (2, 'Planejamento e método'), (3, 'Perseverança e Tenacidade'),
                    (4, 'Apresentação pessoal'), (5, 'Lealdade'), (6, 'Tato'), (7, 'Equilíbrio emocional'),
                    (8, 'Disciplina'), (9, 'Responsabilidade'), (10, 'Maturidade'), (11, 'Assiduidade'),
                    (12, 'Pontualidade'), (13, 'Dicção de voz e comando'), (14, 'Liderança'), (15, 'Relacionamento interpessoal'),
                    (16, 'Ética'), (17, 'Produtividade'), (18, 'Eficiência')
                ] %}

                {% for id, nome in atributos %}
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="attr_{{ id }}" class="form-label"><strong>{{ id }}. {{ nome }}</strong></label>
                        <input type="number" step="0.1" min="0" max="10" class="form-control" 
                               id="attr_{{ id }}" name="attr_{{ id }}" value="8.0">
                    </div>
                </div>
                {% endfor %}
                
            </div>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">
            Justificativas e Observações
        </div>
        <div class="card-body">
            <div class="form-group mb-3">
                <label for="justificativa_notas" class="form-label">Justificativa para Graus Abaixo de 7.0 ou Acima de 9.0 (Obrigatório se ocorrer)</label>
                <textarea class="form-control" id="justificativa_notas" name="justificativa_notas" rows="4" placeholder="Conforme Art. 125, § 2º..."></textarea>
            </div>
            
            <div class="form-group mb-3">
                <label for="observacoes" class="form-label">Observações Gerais</label>
                <textarea class="form-control" id="observacoes" name="observacoes" rows="4"></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Parecer sobre Adaptação à Carreira Militar</label>
                <div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="adaptacao_carreira" id="adaptado" value="Adaptado à carreira militar">
                        <label class="form-check-label" for="adaptado">Adaptado à carreira militar</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="adaptacao_carreira" id="em_adaptacao" value="Em adaptação à carreira militar" checked>
                        <label class="form-check-label" for="em_adaptacao">Em adaptação à carreira militar</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="adaptacao_carreira" id="nao_adaptado" value="Não adaptado à carreira militar">
                        <label class="form-check-label" for="nao_adaptado">Não adaptado à carreira militar</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">
            Dados do Avaliador
        </div>
        <div class="card-body">
            <div class="form-group">
                <label for="nome_avaliador_custom" class="form-label">Nome do Avaliador (para o PDF)</label>
                <input type="text" class="form-control" id="nome_avaliador_custom" name="nome_avaliador_custom" 
                       value="{{ default_name | e }}" required>
                <small class="form-text text-muted">Este nome aparecerá como o avaliador no documento PDF gerado.</small>
            </div>
        </div>
    </div>
    <div class="mt-4 d-flex justify-content-end">
        <a href="{{ url_for('justica.fada_lista_alunos') }}" class="btn btn-secondary me-2">Cancelar</a>
        <button type="submit" class="btn btn-success">Salvar Avaliação e Gerar PDF</button>
    </div>
</form>
{% endblock %}