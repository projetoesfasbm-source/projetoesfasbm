<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Exportação de Processos Disciplinares</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.5;
        }
        .processo-container {
            border: 1px solid #ccc;
            padding: 1.5cm;
            margin-bottom: 2cm;
            page-break-inside: avoid;
        }
        .processo-container:last-child {
            margin-bottom: 0;
        }
        h1 {
            text-align: center;
            margin-bottom: 1.5cm;
        }
        .section {
            margin-bottom: 1cm;
        }
        .section-title {
            font-weight: bold;
            margin-bottom: 0.25cm;
        }
        .content {
            white-space: pre-wrap; /* Essencial para manter as quebras de linha */
            word-wrap: break-word;
            text-align: justify;
        }
    </style>
</head>
<body>

    <h1>Relatório de Processos Disciplinares Finalizados</h1>

    {% for processo in processos %}
    <div class="processo-container">
        <div class="section">
            <div class="section-title">PROCESSO ID: {{ processo.id }}</div>
        </div>
        
        <div class="section">
            <div class="section-title">DADOS DO ALUNO:</div>
            <div class="content">
                <strong>Nome:</strong> {{ processo.aluno.user.nome_completo }}<br>
                <strong>Posto/Graduação:</strong> {{ processo.aluno.user.posto_graduacao }}<br>
                <strong>Matrícula:</strong> {{ processo.aluno.user.matricula }}
            </div>
        </div>

        <div class="section">
            <div class="section-title">TERMO DE JUSTIFICAÇÃO:</div>
            <div class="content">{{ processo.observacao }}</div>
        </div>
        
        <div class="section">
            <div class="section-title">DEFESA APRESENTADA PELO ALUNO:</div>
            <div class="content">{{ processo.defesa or 'Nenhuma defesa foi apresentada.' }}</div>
        </div>

        <div class="section">
            <div class="section-title">DECISÃO FINAL (SANÇÃO APLICADA):</div>
            <div class="content">
                <strong>Decisão:</strong> {{ processo.decisao_final }}<br>
                <strong>Data:</strong> {{ processo.data_decisao.strftime('%d/%m/%Y') if processo.data_decisao else 'N/A' }}
            </div>
        </div>
    </div>
    {% endfor %}

</body>
</html>